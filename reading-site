<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø±Ø­Ù„Ø© Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠ</title>
  <style>
    :root{--bg:#0b1220;--card:#121a2b;--muted:#9fb0d0;--text:#eaf0ff;--accent:#7aa7ff;--ok:#6ee7b7;--bad:#fb7185;}
    *{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#070b14);color:var(--text)}
    .wrap{max-width:980px;margin:auto;padding:18px}
    .top{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:44px;height:44px;border-radius:14px;background:linear-gradient(135deg,var(--accent),#9a7bff)}
    .title h1{margin:0;font-size:20px}
    .title p{margin:2px 0 0;color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:14px;margin-top:14px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .card{background:rgba(18,26,43,.92);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .btn{border:0;border-radius:14px;padding:10px 12px;background:rgba(255,255,255,.08);color:var(--text);cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#9a7bff);color:#081028;font-weight:700}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .levels{display:flex;gap:8px;flex-wrap:wrap}
    .pill{padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);cursor:pointer}
    .pill.active{border-color:rgba(122,167,255,.8);box-shadow:0 0 0 3px rgba(122,167,255,.15)}
    .kpi{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .k{flex:1;min-width:160px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.07);border-radius:16px;padding:10px}
    .k b{display:block;font-size:18px}
    .k span{color:var(--muted);font-size:12px}
    .sep{height:1px;background:rgba(255,255,255,.08);margin:12px 0}
    .txt{line-height:1.9;font-size:17px}
    .muted{color:var(--muted)}
    .qhead{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .progress{height:10px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#9a7bff)}
    .opt{display:block;margin-top:10px;padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);cursor:pointer}
    .opt:hover{border-color:rgba(255,255,255,.22)}
    .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);color:var(--muted);font-size:12px}
    .feedback{margin-top:10px;padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04)}
    textarea{width:100%;min-height:90px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.25);color:var(--text);padding:10px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .hint{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div class="brand">
      <div class="logo"></div>
      <div class="title">
        <h1>Ø±Ø­Ù„Ø© Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠ</h1>
        <p>Ø§Ù‚Ø±Ø£ + Ø£Ø¬Ø¨ + Ø§Ø¬Ù…Ø¹ Ù†Ù‚Ø§Ø·Ùƒ ğŸ¯</p>
      </div>
    </div>
    <button class="btn" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡</button>
  </div>

  <div class="grid">
    <div class="card" id="mainCard"></div>

    <div class="card">
      <div class="muted">Ù„ÙˆØ­Ø© Ø³Ø±ÙŠØ¹Ø©</div>
      <div class="kpi">
        <div class="k"><b id="scoreK">0</b><span>Ø§Ù„Ù†Ù‚Ø§Ø·</span></div>
        <div class="k"><b id="streakK">1</b><span>Ø³Ù„Ø³Ù„Ø© Ø§Ù„ÙŠÙˆÙ…</span></div>
      </div>
      <div class="sep"></div>
      <div class="muted">Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ÙÙ‡Ù… Ø§Ù„ØªÙŠ Ù†ØºØ·ÙŠÙ‡Ø§:</div>
      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <span class="tag">Ø­Ø±ÙÙŠ</span>
        <span class="tag">Ù…ÙØ±Ø¯Ø§Øª</span>
        <span class="tag">Ø§Ø³ØªÙ†ØªØ§Ø¬ÙŠ</span>
        <span class="tag">ÙÙƒØ±Ø© Ø±Ø¦ÙŠØ³Ø©</span>
        <span class="tag">Ø³Ø¨Ø¨ ÙˆÙ†ØªÙŠØ¬Ø©</span>
        <span class="tag">ØªØ±ØªÙŠØ¨</span>
        <span class="tag">Ù†Ø§Ù‚Ø¯</span>
        <span class="tag">Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</span>
      </div>
      <div class="sep"></div>
      <div class="hint">Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…Ø¹Ù„Ù…: Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù†Ø¶ÙŠÙ â€œØ­Ø³Ø§Ø¨Ø§Øª Ø·Ù„Ø§Ø¨â€ ÙˆØªÙ‚Ø§Ø±ÙŠØ± ÙØµÙ„ ÙƒØ§Ù…Ù„Ø©.</div>
    </div>
  </div>
</div>

<script>
const DATA = {
  levels: [
    { id:"beginner", name:"Ù…Ø¨ØªØ¯Ø¦", emoji:"ğŸŒ±", textId:"t1" },
    { id:"middle", name:"Ù…ØªÙˆØ³Ø·", emoji:"ğŸš€", textId:"t2" },
    { id:"advanced", name:"Ù…ØªÙ‚Ø¯Ù…", emoji:"ğŸ†", textId:"t2" }
  ],
  texts: {
    t1: {
      title: "Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙƒØªØ¨Ø©",
      hardWords: [
        {w:"Ø´Ø¬Ù‘Ø¹Ù‡", m:"Ø­ÙÙ‘Ø²Ù‡ ÙˆØ¯ÙØ¹Ù‡ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±"},
        {w:"Ø¹Ø§Ø¯Ø©", m:"Ø´ÙŠØ¡ Ù†ÙØ¹Ù„Ù‡ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±"}
      ],
      body: "Ø°Ù‡Ø¨Ù Ø³Ø§Ù…ÙŠ Ù…Ø¹ ÙˆØ§Ù„Ø¯Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙƒØªØ¨Ø©Ù Ø¨Ø¹Ø¯Ù Ø§Ù„Ø¹ØµØ±. Ø§Ø®ØªØ§Ø±Ù Ù‚ØµØ©Ù‹ Ù‚ØµÙŠØ±Ø©Ù‹ Ø¹Ù† Ø§Ù„Ø¨Ø­Ø±ØŒ Ø«Ù… Ø¬Ù„Ø³Ù ÙŠÙ‚Ø±Ø£ Ø¨Ù‡Ø¯ÙˆØ¡. Ù„Ø§Ø­Ø¸Ù Ø³Ø§Ù…ÙŠ ÙƒÙ„Ù…Ø©Ù‹ ØµØ¹Ø¨Ø©Ù‹ØŒ ÙØ³Ø£Ù„Ù Ø§Ù„Ù…ÙˆØ¸ÙÙ Ø¹Ù†Ù‡Ø§. Ø´Ø±Ø­Ù Ù„Ù‡ Ø§Ù„Ù…ÙˆØ¸ÙÙ Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø¨Ø§Ø¨ØªØ³Ø§Ù…Ø©ØŒ ÙˆØ´Ø¬Ù‘Ø¹Ù‡ Ø£Ù† ÙŠÙ‚Ø±Ø£ ÙƒÙ„Ù‘Ù ÙŠÙˆÙ…Ù Ø¹Ø´Ø± Ø¯Ù‚Ø§Ø¦Ù‚. Ø¹Ø§Ø¯Ù Ø³Ø§Ù…ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØªÙ Ø³Ø¹ÙŠØ¯Ù‹Ø§ØŒ ÙˆÙ‚Ø±Ù‘Ø± Ø£Ù† ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¹Ø§Ø¯Ø©Ù‹ ÙŠÙˆÙ…ÙŠØ©."
    },
    t2: {
      title: "Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¨Ø­Ø±",
      hardWords: [
        {w:"ÙŠØªØ¬Ø§Ù‡Ù„ÙˆÙ†", m:"Ù„Ø§ ÙŠÙ‡ØªÙ…ÙˆÙ† ÙˆÙ„Ø§ ÙŠÙ„ØªÙØªÙˆÙ†"},
        {w:"Ø¥Ø´Ø§Ø±Ø§Øª", m:"Ø¹Ù„Ø§Ù…Ø§Øª ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø´ÙŠØ¡"}
      ],
      body: "ÙÙŠ Ø±Ø­Ù„Ø© ØµÙŠØ¯Ù Ù…Ø¹ Ø¹Ù…ÙŠØŒ ÙƒØ§Ù† Ø§Ù„Ø¨Ø­Ø±Ù Ù‡Ø§Ø¯Ø¦Ù‹Ø§ ÙÙŠ Ø£ÙˆÙ„Ù‡ØŒ Ø«Ù… ØªØºÙŠÙ‘Ø±Ù Ù…Ø²Ø§Ø¬ÙÙ‡ ÙØ¬Ø£Ø©. Ù„Ø§Ø­Ø¸ØªÙ Ø£Ù† Ø¨Ø¹Ø¶Ù Ø§Ù„ØµÙŠØ§Ø¯ÙŠÙ† ÙŠØªØ¬Ø§Ù‡Ù„ÙˆÙ† Ø¥Ø´Ø§Ø±Ø§ØªÙ Ø§Ù„Ø±ÙŠØ­ØŒ Ù„Ø£Ù†Ù‡Ù… ÙŠØ±ÙŠØ¯ÙˆÙ† ØµÙŠØ¯Ù‹Ø§ Ø£ÙƒØ«Ø±. Ù‚Ø§Ù„ Ø¹Ù…ÙŠ: â€œØ§Ù„Ø¨Ø­Ø± Ù„Ø§ ÙŠØ¹Ø§Ù†Ø¯ØŒ Ù„ÙƒÙ†Ù‡ ÙŠØ¹Ù„Ù‘Ù…Ø› Ù…Ù† ÙŠØ­ØªØ±Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ÙŠØ¹ÙˆØ¯ Ø³Ø§Ù„Ù…Ù‹Ø§.â€ Ù‚Ø±Ù‘Ø±Ù†Ø§ Ø£Ù† Ù†Ø¹ÙˆØ¯ Ù‚Ø¨Ù„ Ø£Ù† ØªØ´ØªØ¯Ù‘ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬. ÙˆÙÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø´Ø¹Ø±ØªÙ Ø£Ù† Ø§Ù„Ø­ÙƒÙ…Ø© Ù„ÙŠØ³Øª ÙÙŠ Ø§Ù„Ø´Ø¬Ø§Ø¹Ø© ÙÙ‚Ø·ØŒ Ø¨Ù„ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ù…ØªÙ‰ ØªØªÙˆÙ‚Ù."
    }
  },
  quizzes: {
    t1: [
      {skill:"Ø­Ø±ÙÙŠ", type:"mcq", q:"Ù…ØªÙ‰ Ø°Ù‡Ø¨ Ø³Ø§Ù…ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙƒØªØ¨Ø©ØŸ", a:["ØµØ¨Ø§Ø­Ù‹Ø§","Ø¨Ø¹Ø¯ Ø§Ù„Ø¹ØµØ±","Ù„ÙŠÙ„Ù‹Ø§"], correct:1, hint:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø²Ù…Ù† ÙÙŠ Ø£ÙˆÙ„ Ø¬Ù…Ù„Ø©."},
      {skill:"Ø­Ø±ÙÙŠ", type:"mcq", q:"Ù…Ø§Ø°Ø§ Ø§Ø®ØªØ§Ø± Ø³Ø§Ù…ÙŠØŸ", a:["Ù…Ø¬Ù„Ø©","Ù‚ØµØ© Ù‚ØµÙŠØ±Ø©","ÙƒØªØ§Ø¨ Ø·Ø¨Ø®"], correct:1, hint:"Ù…Ø°ÙƒÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„Ù†Øµ."},
      {skill:"Ù…ÙØ±Ø¯Ø§Øª", type:"mcq", q:"Ù…Ø¹Ù†Ù‰ â€œØ´Ø¬Ù‘Ø¹Ù‡â€ Ø£Ù‚Ø±Ø¨ Ø¥Ù„Ù‰:", a:["Ù…Ù†Ø¹Ù‡","Ø­ÙÙ‘Ø²Ù‡","ØªØ¬Ø§Ù‡Ù„Ù‡"], correct:1, hint:"Ø§Ù„Ø³ÙŠØ§Ù‚ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø¯ÙØ¹Ù‡ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±."},
      {skill:"ÙÙƒØ±Ø© Ø±Ø¦ÙŠØ³Ø©", type:"mcq", q:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø© Ù„Ù„Ù†Øµ Ù‡ÙŠ:", a:["Ø§Ù„Ù„Ø¹Ø¨ ÙÙŠ Ø§Ù„Ø¨Ø­Ø±","Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¹Ø§Ø¯Ø©","Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒØªØ¨ ÙÙ‚Ø·"], correct:1, hint:"Ø§Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ù‚Ø±Ø§Ø± Ø³Ø§Ù…ÙŠ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©."},
      {skill:"Ø§Ø³ØªÙ†ØªØ§Ø¬ÙŠ", type:"mcq", q:"Ù„Ù…Ø§Ø°Ø§ Ø³Ø£Ù„ Ø³Ø§Ù…ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙØŸ", a:["Ù„Ø£Ù†Ù‡ Ø¶Ø§Ø¹","Ù„Ø£Ù† Ù„Ø¯ÙŠÙ‡ ÙƒÙ„Ù…Ø© ØµØ¹Ø¨Ø©","Ù„Ø£Ù†Ù‡ ÙŠØ±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø³Ø±ÙŠØ¹Ù‹Ø§"], correct:1, hint:"ÙˆØ±Ø¯ Ø³Ø¨Ø¨ Ø§Ù„Ø³Ø¤Ø§Ù„ ØµØ±ÙŠØ­Ù‹Ø§."},
      {skill:"Ø³Ø¨Ø¨ ÙˆÙ†ØªÙŠØ¬Ø©", type:"mcq", q:"Ù†ØªÙŠØ¬Ø© Ø´Ø±Ø­ Ø§Ù„Ù…ÙˆØ¸Ù Ù„Ø³Ø§Ù…ÙŠ:", a:["ØºØ¶Ø¨ Ø³Ø§Ù…ÙŠ","Ø¹Ø§Ø¯ Ø³Ø¹ÙŠØ¯Ù‹Ø§ ÙˆÙ‚Ø±Ø± Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§","ØªØ±Ùƒ Ø§Ù„Ù‚ØµØ©"], correct:1, hint:"Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± ÙÙŠ Ø¢Ø®Ø± Ø³Ø·Ø±ÙŠÙ†."},
      {skill:"Ù†Ø§Ù‚Ø¯", type:"text", q:"Ù‡Ù„ ØªØµØ±Ù‘Ù Ø§Ù„Ù…ÙˆØ¸Ù ÙƒØ§Ù† Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§ØŸ Ø§ÙƒØªØ¨ (Ù†Ø¹Ù…/Ù„Ø§) Ø«Ù… Ø³Ø¨Ø¨Ù‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§.", sample:"Ù†Ø¹Ù…ØŒ Ù„Ø£Ù†Ù‡ Ø´Ø±Ø­ Ø§Ù„Ù…Ø¹Ù†Ù‰ ÙˆØ´Ø¬Ù‘Ø¹Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©."},
      {skill:"Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ", type:"text", q:"Ø§Ù‚ØªØ±Ø­ Ø¹Ù†ÙˆØ§Ù†Ù‹Ø§ Ø¢Ø®Ø± Ù„Ù„Ù†Øµ (Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·).", sample:"Ø¹Ø´Ø±Ø© Ø¯Ù‚Ø§Ø¦Ù‚ ØªØºÙŠÙ‘Ø± Ø§Ù„ÙŠÙˆÙ…"}
    ],
    t2: [
      {skill:"Ø­Ø±ÙÙŠ", type:"mcq", q:"Ù…Ø¹ Ù…Ù† ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø­Ù„Ø©ØŸ", a:["Ù…Ø¹ ØµØ¯ÙŠÙ‚","Ù…Ø¹ Ø§Ù„Ø¹Ù…","ÙˆØ­Ø¯Ù‡"], correct:1, hint:"ÙˆØ±Ø¯Øª ÙÙŠ Ø£ÙˆÙ„ Ø¬Ù…Ù„Ø©."},
      {skill:"Ø­Ø±ÙÙŠ", type:"mcq", q:"Ù…Ø§Ø°Ø§ Ø­Ø¯Ø« Ù„Ù„Ø¨Ø­Ø±ØŸ", a:["Ø¨Ù‚ÙŠ Ù‡Ø§Ø¯Ø¦Ù‹Ø§ Ø¯Ø§Ø¦Ù…Ù‹Ø§","ØªØºÙŠÙ‘Ø± ÙØ¬Ø£Ø©","Ø§Ø®ØªÙÙ‰"], correct:1, hint:"Ù…Ø°ÙƒÙˆØ±Ø© Ø¨Ø¹Ø¯ ÙˆØµÙ Ø§Ù„Ù‡Ø¯ÙˆØ¡."},
      {skill:"Ù…ÙØ±Ø¯Ø§Øª", type:"mcq", q:"Ù…Ø¹Ù†Ù‰ â€œÙŠØªØ¬Ø§Ù‡Ù„ÙˆÙ†â€ Ø£Ù‚Ø±Ø¨ Ø¥Ù„Ù‰:", a:["ÙŠÙ„Ø§Ø­Ø¸ÙˆÙ†","Ù„Ø§ ÙŠÙ‡ØªÙ…ÙˆÙ†","ÙŠÙØ±Ø­ÙˆÙ†"], correct:1, hint:"Ø¹ÙƒØ³ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù„Ø¹Ù„Ø§Ù…Ø§Øª."},
      {skill:"Ø§Ø³ØªÙ†ØªØ§Ø¬ÙŠ", type:"mcq", q:"Ù„Ù…Ø§Ø°Ø§ ØªØ¬Ø§Ù‡Ù„ Ø¨Ø¹Ø¶ Ø§Ù„ØµÙŠØ§Ø¯ÙŠÙ† Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø±ÙŠØ­ØŸ", a:["Ù„Ø£Ù†Ù‡Ù… ÙŠØ®Ø§ÙÙˆÙ†","Ù„Ø£Ù†Ù‡Ù… ÙŠØ±ÙŠØ¯ÙˆÙ† ØµÙŠØ¯Ù‹Ø§ Ø£ÙƒØ«Ø±","Ù„Ø£Ù†Ù‡Ù… Ù„Ø§ ÙŠÙ…Ù„ÙƒÙˆÙ† Ù‚Ø§Ø±Ø¨Ù‹Ø§"], correct:1, hint:"Ø³Ø¨Ø¨ ÙˆØ§Ø¶Ø­ ÙÙŠ Ø§Ù„Ù†Øµ."},
      {skill:"ÙÙƒØ±Ø© Ø±Ø¦ÙŠØ³Ø©", type:"mcq", q:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø© Ø§Ù„Ø£Ù‚Ø±Ø¨:", a:["ÙƒØ«Ø±Ø© Ø§Ù„ØµÙŠØ¯","Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ÙˆØ§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­","Ø³Ø¨Ø§Ø­Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø±"], correct:1, hint:"Ø§Ù†Ø¸Ø± Ù„Ù‚ÙˆÙ„ Ø§Ù„Ø¹Ù… ÙˆÙ‚Ø±Ø§Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©."},
      {skill:"Ø³Ø¨Ø¨ ÙˆÙ†ØªÙŠØ¬Ø©", type:"mcq", q:"Ù„Ù…Ø§Ø°Ø§ Ù‚Ø±Ø± Ø§Ù„Ø±Ø§ÙˆÙŠ Ø§Ù„Ø¹ÙˆØ¯Ø©ØŸ", a:["Ù„Ø£Ù† Ø§Ù„Ø·Ø¹Ø§Ù… Ø§Ù†ØªÙ‡Ù‰","Ù‚Ø¨Ù„ Ø£Ù† ØªØ´ØªØ¯ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬","Ù„Ø£Ù† Ø§Ù„Ø¬Ùˆ Ø¨Ø§Ø±Ø¯"], correct:1, hint:"ÙˆØ±Ø¯Øª Ù…Ø¹ Ù‚Ø±Ø§Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹."},
      {skill:"Ù†Ø§Ù‚Ø¯", type:"text", q:"Ø£ÙŠ Ø¹Ø¨Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ù†Øµ ØªØ­Ù…Ù„ â€œÙ‚ÙŠÙ…Ø©â€ØŸ Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø£Ùˆ Ù…Ø¹Ù†Ø§Ù‡Ø§ Ø¨Ø¬Ù…Ù„Ø©.", sample:"Ù…Ù† ÙŠØ­ØªØ±Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ÙŠØ¹ÙˆØ¯ Ø³Ø§Ù„Ù…Ù‹Ø§."},
      {skill:"Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ", type:"text", q:"Ø§ÙƒØªØ¨ Ù†Ù‡Ø§ÙŠØ© Ø¨Ø¯ÙŠÙ„Ø© Ù…Ù† Ø³Ø·Ø± ÙˆØ§Ø­Ø¯.", sample:"ØªØ¹Ù„Ù‘Ù…ØªÙ Ø£Ù† Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙÙˆØ²ÙŒ Ù„Ø§ ÙŠÙ‚Ù„Ù‘ Ø¹Ù† Ø§Ù„ØµÙŠØ¯."}
    ]
  }
};

let state = {
  screen: "home",
  levelId: "beginner",
  textId: "t1",
  qIndex: 0,
  score: 0,
  answers: []
};

const $ = (id)=>document.getElementById(id);
const main = $("mainCard");
const scoreK = $("scoreK");
const streakK = $("streakK");

function renderHome(){
  state.screen="home";
  const levelsHtml = DATA.levels.map(l => `
    <div class="pill ${l.id===state.levelId?'active':''}" onclick="pickLevel('${l.id}')">
      ${l.emoji} ${l.name}
    </div>
  `).join("");

  main.innerHTML = `
    <div class="qhead">
      <div>
        <div class="muted">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø«Ù… Ø§Ø¨Ø¯Ø£</div>
        <h2 style="margin:6px 0 0">Ø¬Ø§Ù‡Ø² Ù„ØªØ­Ø¯Ù‘ÙŠ Ø§Ù„ÙŠÙˆÙ…ØŸ</h2>
      </div>
      <button class="btn primary" onclick="startReading()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯Ù‘ÙŠ</button>
    </div>
    <div class="sep"></div>
    <div class="levels">${levelsHtml}</div>
    <div class="sep"></div>
    <div class="muted">ÙÙƒØ±Ø© Ø¨Ø³ÙŠØ·Ø©: Ø§Ù‚Ø±Ø£ Ø§Ù„Ù†Øµ Ø«Ù… Ø£Ø¬Ø¨. Ø³ØªØ¸Ù‡Ø± Ù„Ùƒ Ù†ØªÙŠØ¬Ø© ÙˆØªÙˆØµÙŠØ© Ø¨Ø§Ù„Ù…Ù‡Ø§Ø±Ø© Ø§Ù„Ø£Ø¶Ø¹Ù.</div>
  `;
}

function pickLevel(id){
  state.levelId=id;
  const lvl = DATA.levels.find(x=>x.id===id);
  state.textId = lvl.textId;
  renderHome();
}

function startReading(){
  state.screen="read";
  const t = DATA.texts[state.textId];
  main.innerHTML = `
    <div class="qhead">
      <div>
        <div class="muted">Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
        <h2 style="margin:6px 0 0">${t.title}</h2>
      </div>
      <div class="row">
        <button class="btn" onclick="toggleWords()">Ø£Ø¸Ù‡Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ¹Ø¨Ø©</button>
        <button class="btn primary" onclick="startQuiz()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
      </div>
    </div>
    <div class="sep"></div>
    <div class="txt">${t.body}</div>
    <div id="wordsBox" style="display:none;margin-top:12px" class="feedback"></div>
  `;
}

function toggleWords(){
  const box = document.getElementById("wordsBox");
  if(!box) return;
  const t = DATA.texts[state.textId];
  const html = `<b>Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ¹Ø¨Ø©:</b><div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
    ${t.hardWords.map(x=>`<span class="tag">${x.w} = ${x.m}</span>`).join("")}
  </div>`;
  box.innerHTML = html;
  box.style.display = (box.style.display==="none") ? "block" : "none";
}

function startQuiz(){
  state.screen="quiz";
  state.qIndex=0;
  state.answers=[];
  renderQuestion();
}

function renderQuestion(){
  const qs = DATA.quizzes[state.textId];
  const q = qs[state.qIndex];
  const pct = Math.round(((state.qIndex)/qs.length)*100);

  let body = `
    <div class="qhead">
      <div>
        <div class="muted">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© â€¢ Ù…Ù‡Ø§Ø±Ø©: <b>${q.skill}</b></div>
        <h2 style="margin:6px 0 0">${q.q}</h2>
      </div>
      <div class="tag">Ø³Ø¤Ø§Ù„ ${state.qIndex+1}/${qs.length}</div>
    </div>
    <div class="sep"></div>
    <div class="progress"><div class="bar" style="width:${pct}%"></div></div>
  `;

  if(q.type==="mcq"){
    body += q.a.map((opt,i)=>`<div class="opt" onclick="answerMCQ(${i})">${opt}</div>`).join("");
    body += `<div class="hint">ØªÙ„Ù…ÙŠØ­: ${q.hint}</div>`;
  } else {
    body += `
      <div class="muted">Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§ (ÙŠÙƒÙÙŠ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯):</div>
      <textarea id="freeText" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ..."></textarea>
      <div class="row" style="margin-top:10px">
        <button class="btn" onclick="showSample()">Ù…Ø«Ø§Ù„</button>
        <button class="btn primary" onclick="answerText()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
      <div id="sampleBox" class="feedback" style="display:none"></div>
    `;
  }

  main.innerHTML = body;
}

function answerMCQ(i){
  const qs = DATA.quizzes[state.textId];
  const q = qs[state.qIndex];
  const ok = (i===q.correct);
  state.answers.push({skill:q.skill, ok});
  state.score += ok ? 10 : 0;
  scoreK.textContent = state.score;

  // feedback
  main.innerHTML += `
    <div class="feedback" style="border-color:${ok?'rgba(110,231,183,.4)':'rgba(251,113,133,.4)'}">
      <b style="color:${ok?'var(--ok)':'var(--bad)'}">${ok?'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© âœ…':'Ù‚Ø±ÙŠØ¨Ø©â€¦ âŒ'}</b>
      <div class="muted" style="margin-top:6px">
        ${ok ? 'Ù…Ù…ØªØ§Ø²! ØªØ§Ø¨Ø¹.' : 'Ø¬Ø±Ù‘Ø¨ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.'}
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn primary" onclick="nextQ()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  `;
  // disable clicks by overlay idea? simple: remove onclicks
  document.querySelectorAll(".opt").forEach(el=>el.onclick=null);
}

function showSample(){
  const qs = DATA.quizzes[state.textId];
  const q = qs[state.qIndex];
  const box = document.getElementById("sampleBox");
  box.style.display="block";
  box.innerHTML = `<b>Ù…Ø«Ø§Ù„ Ù…Ù…ÙƒÙ†:</b><div class="muted" style="margin-top:6px">${q.sample}</div>`;
}

function answerText(){
  const txt = (document.getElementById("freeText")?.value || "").trim();
  const qs = DATA.quizzes[state.textId];
  const q = qs[state.qIndex];
  // Ù„Ø§ Ù†ØµØ­Ø­ Ø§Ù„Ù†Øµ Ø§Ù„Ø­Ø± Ø§Ù„Ø¢Ù†Ø› Ù†Ø¹ØªØ¨Ø±Ù‡ Ù…Ù†Ø¬Ø²Ù‹Ø§ ÙˆÙŠØ£Ø®Ø° Ù†Ù‚Ø§Ø· Ø¥Ù† ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§
  const ok = txt.length>=2;
  state.answers.push({skill:q.skill, ok});
  state.score += ok ? 10 : 0;
  scoreK.textContent = state.score;
  nextQ();
}

function nextQ(){
  const qs = DATA.quizzes[state.textId];
  state.qIndex++;
  if(state.qIndex>=qs.length) return renderResult();
  renderQuestion();
}

function renderResult(){
  state.screen="result";
  const total = DATA.quizzes[state.textId].length * 10;
  const pct = Math.round((state.score/total)*100);

  // skill breakdown
  const bySkill = {};
  state.answers.forEach(a=>{
    if(!bySkill[a.skill]) bySkill[a.skill]={t:0, ok:0};
    bySkill[a.skill].t++;
    if(a.ok) bySkill[a.skill].ok++;
  });
  const weakest = Object.entries(bySkill)
    .map(([k,v])=>({skill:k, rate: v.ok/v.t}))
    .sort((a,b)=>a.rate-b.rate)[0]?.skill || "â€”";

  const rows = Object.entries(bySkill).map(([k,v])=>{
    const rate = Math.round((v.ok/v.t)*100);
    return `<div class="k"><b>${rate}%</b><span>${k}</span></div>`;
  }).join("");

  main.innerHTML = `
    <div class="qhead">
      <div>
        <div class="muted">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
        <h2 style="margin:6px 0 0">Ø¯Ø±Ø¬ØªÙƒ: ${state.score} / ${total} (${pct}%)</h2>
      </div>
      <button class="btn primary" onclick="renderHome()">ØªØ­Ø¯Ù‘ÙŠ Ø¬Ø¯ÙŠØ¯</button>
    </div>
    <div class="sep"></div>
    <div class="muted">Ø£Ø¯Ø§Ø¡Ùƒ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª:</div>
    <div class="kpi" style="margin-top:10px">${rows}</div>
    <div class="sep"></div>
    <div class="feedback">
      <b>ØªÙˆØµÙŠØ© Ø§Ù„ÙŠÙˆÙ… ğŸ¯</b>
      <div class="muted" style="margin-top:6px">
        Ø±ÙƒÙ‘Ø² ØºØ¯Ù‹Ø§ Ø¹Ù„Ù‰ Ù…Ù‡Ø§Ø±Ø©: <b>${weakest}</b> (Ø³Ø£Ø¶ÙŠÙ Ù„Ùƒ ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø®Ø§ØµØ© Ø¨Ù‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨).
      </div>
    </div>
  `;
}

$("resetBtn").addEventListener("click", ()=>{
  state = {screen:"home", levelId:state.levelId, textId:state.textId, qIndex:0, score:0, answers:[]};
  scoreK.textContent = 0;
  renderHome();
});

renderHome();
</script>
</body>
</html>
